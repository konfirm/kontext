!function(n){"use strict";function e(){function n(n){return n&&"object"==typeof n&&!(n instanceof RegExp||n instanceof Array)}function e(t,r){return Object.keys(r).filter(function(n){return r.hasOwnProperty(n)}).forEach(function(o){var i=r[o];t[o]=n(i)?e(n(t[o])?t[o]:{},i):i}),t}function t(e,t,r){t.split(".").forEach(function(t,o,i){n(e)&&(r(e,t,i.slice(0,o+1).join(".")),e=t in e?e[t]:null)})}function r(e){var o={};return Object.keys(e).forEach(function(i){t(o,i,function(t,o,u){u===i?t[o]=n(e[i])?r(e[i]):e[i]:o in t||(t[o]={})})}),o}function o(n){var o={};u[n]=function(n,i){var u,c;return"string"==typeof n?(arguments.length>1&&(u={},u[n]=i,o=e(o,r(u))),t(o,n,function(e,t,r){r===n&&(c=e[t])}),c):("object"==typeof n&&e(o,n),o)}}function i(){["_","public"].forEach(o)}var u=this;u.combine=function(n){return e(e({},u["public"]()),r(n||{}))},i()}function t(){function n(e,t,r){setTimeout(function(){return e.length&&e.shift().apply(null,t)!==!1?n(e,t,r):void r()},0)}var e=this,t=[];e.add=function(n,e,r){return t.push({type:n,handle:e,invoke:r||1/0}),e},e.remove=function(n,e){var r=[];return t=t.filter(function(t){return n&&t.type!==n||e&&t.handle!==e?!0:(r.push(t.handle),!1)}),r},e.list=function(n){return t.filter(function(e){return!n||"*"===n||e.type===n})},e.trigger=function(t,r,o){var i=e.list(t).map(function(n){return--n.invoke<=0&&e.remove(t,n.handle),n.invoke>=0?n.handle:!1}).filter(function(n){return"function"==typeof n});arguments.length<3&&"function"==typeof arguments[arguments.length-1]&&(o=r,r=[]),n(i,[].concat(r),function(){o&&o()})}}function r(){function e(){var e=n.MutationObserver||n.webkitMutationObserver||!1;e&&(o={observer:e,config:{characterData:!0,characterDataOldValue:!0}})}function t(n,e){var t=typeof n;switch(t){case"boolean":return!!e;case"number":return+e}return e}function r(n,e){var r=n(),o=t(r,e);o!==r&&n(o)}var o,i=this;i.monitor=function(n,e){o?new o.observer(function(n){n.forEach(function(n){r(e,n.target.nodeValue)})}).observe(n,o.config):n.addEventListener&&n.addEventListener("DOMCharacterDataModified",function(n){r(e,n.newValue)})},e()}function o(){function o(n,e,t){var r=[].concat(e),o=r.filter(function(e){return n&&e in n});return o.length>=(t?t:r.length)}function i(){return o(document,"addEventListener")&&o(Object,["defineProperties","getOwnPropertyDescriptor"])}function u(){return i()?(A._({rAF:n.requestAnimationFrame||function(n){setTimeout(n,1e3/60)}}),A["public"]({greedy:!0,provider:{},abbreviateExtensions:!0}),_.add("ready",function(n){A._("ready",n||!0)},1),void document.addEventListener("DOMContentLoaded",function(){_.trigger("ready",[void 0,k])},!1)):setTimeout(function(){_.trigger("ready",["Unsupported browser"])},0)}function c(n,e){Object.keys(n).forEach(function(t,r){e(t,n[t],r)})}function f(n){return n&&n.length?Array.prototype.slice.call(n):[]}function a(n,e,t,r,o){var i={enumerable:t};"boolean"==typeof o?(i.writable=o,i.value=r):(i.get=r,i.set=o),Object.defineProperty(n,e,i)}function l(){var n=f(arguments),e=n.reduce(function(n,e){return n.replace("%s",e)});return function(){console.error("Kontext: "+e)}}function s(n,e){var t=Object.keys(e).filter(function(e){return n===e.substr(0,n.length)}).sort();return t.length>1?l('Multiple extensions match "%s": %s',n,t):t.length?e[t[0]]:null}function d(n,e){var t,r=A._("extension")||{};return e&&(r[n]=e,A._("extension",r)),n in r?r[n]:(t=A["public"]("abbreviateExtensions")?s(n,r):null,t||l('Unknown extension "%s"',n))}function p(n,e,t){var r=A["public"]("provider");return e&&(r[n]={handler:e,settings:t},A["public"]("provider",r)),n in r?r[n]:l('Unknown provider "%s"',n)}function v(n){var e=new t;return a(n,"on",!0,e.add,!1),a(n,"off",!0,e.remove,!1),"object"==typeof n&&n.on("update",function(n,e,t,r){_.trigger("update",[n,e,t,r])}),e}function g(n,e){var t=[e.value].join("");n.forEach(function(n){t!==n.nodeValue&&(n.nodeValue=t)})}function h(n,e,t){var r,o;return o=function(n){var o=arguments.length>0,i=r.value;return o&&(r.value=n),r.emission.trigger(o?"update":"access",[e,t,i,r.value]),r.value},r={emission:v(o),element:[],value:n,model:e,key:t},n instanceof Array&&(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(o){var i;"function"==typeof n[o]&&(i=n[o],n[o]=function(){var o=i.apply(n,arguments);return E(n,r),r.emission.trigger("update",[e,t,r.value]),o})}),E(n,r)),o.scope=function(){!e&&arguments.length>0&&(e=arguments[0]),!t&&arguments.length>1&&(t=arguments[1])},o.element=function(){var n=f(arguments);return n.length&&(n.forEach(function(n){D.monitor(n,o)}),g(n,r),r.element=r.element.concat(n)),r.element},r.emission.add("update",function(){A._("rAF")(function(){g(r.element,r)})}),o}function y(n){return"function"==typeof n&&"function"==typeof n.element}function b(n,e){var t,r,o,i,u=!1;if(n&&"object"==typeof n)if(e in n)y(n[e])?u=n[e]:(i=Object.getOwnPropertyDescriptor(n,e),u=i.get);else for(t=e.split("."),r=t.length-1;r>0;){if(o=t.slice(0,r).join("."),o in n)return b(n[o],t.slice(r).join("."));--r}return u}function m(n){return o(n,["on","off","delegation","define"])}function w(n){var e,t;return m(n)||(e=function(e,r){var o=b(n,e);return o?o.scope(n,e):(o=h(r,n,e),a(n,e,!0,o,o)),o.on("update",function(n,e,r,o){t.trigger("update",[n,e,r,o])}),o},c(n,function(r,o){e(r,o),!o||"object"!=typeof o||o instanceof Array||(w(o),o.on("update",function(e,o,i,u){t.trigger("update",[n,r+"."+o,i,u])}))}),t=v(n),a(n,"define",!0,e,!1),a(n,"delegation",!0,function(e){return b(n,e)},!1)),n}function E(n,e){var t=Array.prototype,r=/^[0-9]+$/;c(n,function(e,o){var i;r.test(e)||e in t||y(o)||(i=h(o,n,e),a(n,e,!0,i,i))}),n.forEach(function(n,t){"object"!=typeof n||m(n)||w(n,e.model,e.key).on("update",function(n,t,r){e.emission.trigger("update",[n,t,r])})})}function O(n,e){var t,r=A._("bindings")||[];if(!e){for(t=[n];t[t.length-1].parentNode;)t.push(t[t.length-1].parentNode);return r.filter(function(n){return t.indexOf(n.target)>=0}).map(function(n){return n.model}).filter(function(n,e,t){return e===t.indexOf(n)})}r.push({model:e,target:n}),A._("bindings",r)}function j(n){return n.length?n.reduce(function(n,e){var t=e instanceof Array?j(e):"string"==typeof e?document.querySelectorAll(e):e;return t?n.concat(t.nodeName?[t]:f(t)):n},[]).filter(function(n,e,t){return n&&t.indexOf(n)===e}):[document.body]}function x(n,e){for(var t=0;t<n.length;++t)if(n[t]===e||n[t].contains(e))return!0;return!1}var k=this,A=new e,_=new t,D=new r;k.defaults=function(n,e){return n?A["public"](n,e):A["public"]()},k.ready=function(n){var e=A._("ready");return _.add("ready",n,1),void 0!==e&&_.trigger("ready",[e!==!0?e:void 0,e===!0?k:void 0]),k},k.on=function(n,e){return _.add(n,e)},k.off=function(n,e){return _.remove(n,e)},k.extension=d,k.provider=p,k.delegate=function(n){return h(n)},k.bind=function(){var n=f(arguments),e=w(n.length?n.shift():{}),t=n.length?n[n.length-1]:null,r=t&&!("string"==typeof t||o(t,["nodeType","length"],1)),i=A.combine(r?n.pop():!1),u=[];return j(n).forEach(function(n){O(n,e),c(i.provider,function(t){var r=t in i.provider?i.provider[t]:null,o=r&&"function"==typeof r.handler?r.handler:null,f=r&&"settings"in r?r.settings:null;o&&o(f,n,function(n,t){x(u,n)||c(t,function(t,r){var o=d(t),c={settings:i,extension:t,stopDescend:function(){u.push(n)}};o(n,e,r,c)})})})}),e},k.bindings=function(n){return O(n||document.body)},u()}n.kontext=n.kontext||new o}(window);!function(e){function t(){function e(e){function t(t,n){var r,u=p.filter(function(e){return t.substr(n,e.length)===e}),a=null;return u.length&&(r=u[0],a={type:e[r].type,token:r,index:n},["end","merge"].forEach(function(t){t in e[r]&&(a[t]=e[r][t])})),a}function n(e){return e?e.index+(e.data||e.token||"").length:0}function r(t,r,u){var a=t&&"token"in t&&t.token in e?e[t.token]:null;return a&&a.trim?u?n(t)===r.index:t.index===n(r):!1}function u(e,t,n){var u=!0;switch(e.type){case"text":u=!/^\s+$/.test(e.data);break;case"space":u=!(r(n[t-1],e,!0)||r(n[t+1],e))}return u}function a(e,t){return e.length&&"text"===e[e.length-1].type||e.push({type:"text",data:"",index:t}),e[e.length-1]}function i(e,n,r,i){for(var c,p,s,f=[],d=n||0;e&&d<e.length;){if(c=t(e,d),s=r&&(p=e.substr(d,r.length))===r,s&&!(d>0&&"\\"===e[d-1])){f.push({type:c?c.type:null,token:p,index:d});break}!i&&c?d=o(e,d,c,f):(c=a(f,d),c.data+=e[d],++d)}return f.filter(u)}function o(e,t,r,u){var a,o;return"end"in r&&r.end!==!0?(a=i(e,n(r),r.end||e[t],r.merge||!1),o=a.pop(),u.push({type:r.type,token:r.token,index:r.index,nest:a,end:o}),n(o)):(u.push(r),n(r))}var c=this,p=Object.keys(e);c.tokenize=function(e){return i(e)}}function t(){function t(e,t){var n=!t&&o.test(e)?"":'"',r=e[0]===n&&e[e.length-1]===n;return e&&n&&!r?[n,e.replace(new RegExp("([^\\\\])"+n,"g"),"$1\\"+n),n]:e}function n(e){return e.map(function(e){return e.data}).join("")}function r(e){return e.reduce(function(e,n,r,a){var i=r+1<a.length?a[r+1]:null,o="text"===n.type?t(n.data.trim(),i&&"key"===i.type):n.token;return"space"===n.type?o="":"nest"in n&&(o=o.concat(u(n.nest)).concat(n.end.token)),e.concat(o)},[]).join("")}function u(e){var t=e.filter(function(e){return"comment"!==e.type}).map(function(e){var t;return"quote"===e.type&&(t=[e.token,n(e.nest),e.end.data||e.end.token],e={type:"text",data:t[0]===t[2]?t[1]:t.join("")}),e}).reduce(function(e,t){var n=e.length?e[e.length-1]:null;return n&&"text"===n.type&&"text"===t.type?n.data+=t.data:e=e.concat(t),e},[]);return r(t)}function a(e,t){var n=":"===t?"{}":"[]",r=e.indexOf(t),u=2===(e.match(/"/g)||[]).length&&e.indexOf('"')<r&&e.lastIndexOf('"')>r;return u||e[0]===n[0]?e:n[0]+e+n[1]}var i=this,o=/^(?:true|false|null|-?[0-9]+(?:\.[0-9]+)?)$/i,c=new e({'"':{type:"quote",end:null,merge:!0},"'":{type:"quote",end:null,merge:!0},"/*":{type:"comment",end:"*/",merge:!0},"{":{type:"object",trim:!0,end:"}"},"[":{type:"array",end:"]"},",":{type:"separator",trim:!0},":":{type:"key"}," ":{type:"space"},"	":{type:"space"},"\n":{type:"space"},"\r":{type:"space"}});i.prepare=function(e){return"string"!=typeof e?"":u(c.tokenize(e)).replace(/[,\s]+$/g,"").replace(/^(?:[^\[\{].*?)([:,]).*$/,a)},i.parse=function(e){var t=i.prepare(e);return t?JSON.parse(t):null}}function n(e,t){var n,r,u=[];switch(t.nodeType){case 1:t.hasAttribute(e)&&u.push(t);case 9:case 11:for(n=t.querySelectorAll("["+e+"]"),r=0;r<n.length;++r)u.push(n[r])}return u}function r(e,t){var n;switch(e.nodeType){case 1:return e.contains(t);case 9:return e.body.contains(t);case 11:for(n=0;n<e.childNodes.length;++n)if(r(e.childNodes[n],t))return!0}return!1}var u=this;u.find=function(e,u,a){u&&n(e,u).forEach(function(n){var i;r(u,n)&&(i=(new t).parse(n.getAttribute(e))),i&&a(n,i)})}}e.provider("attribute",function(e,n,r){(new t).find(e.attribute,n,r)},{attribute:"data-kontext"})}(kontext);!function(n){function e(n){function e(n){var e,t,i=[];if(3===n.nodeType)i.push(n);else for(e=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null,!1);t=e.nextNode();)i.push(t);return i}function t(e){var i=e.nodeValue.match(n),o=i?0===i.index?e:e.splitText(i.index):null,a=i?o.splitText(i[0].length):null,l=[];return o&&l.push({node:o,key:i[2],initial:i[3]}),a&&(l=l.concat(t(a))),l}function i(n){var i=[];return e(n).forEach(function(n){i=i.concat(t(n))}),i}var o=this;o.placeholders=function(n,e){n&&i(n).forEach(function(n){n.node.nodeValue="",e.apply(null,[n.node,n.key,n.initial])})}}n.provider("text",function(n,t,i){new e(n.pattern).placeholders(t,function(n,e,t){i(n,{text:{target:e,initial:t}})})},{pattern:/(\{(\$?[a-z_]+[\.-]?(?:[a-z0-9_]+[\.-]?)*)(?::([^\}]+))?\})/i})}(kontext);kontext.extension("attribute",function(t,e,n){"use strict";function o(e,n){t[(n?"set":"remove")+"Attribute"](e,n)}Object.keys(n).forEach(function(t){var i=e.delegation(n[t]);i&&i.on("update",function(){o(t,i())})()})});!function(n){"use strict";function t(){function n(n){return p.test(n)}function t(n,t){for(var r=0,e=n.length;e>r&&t(n[r],r,n)!==!1;++r);}function r(n,t){var r=typeof n;return r===v&&n instanceof Array&&(r=l),r.substr(0,t.length)===t}function e(e){var u={};return r(e,s)?u[e]={$exists:!0}:r(e,l)&&e.length?u.$and=e:r(e,v)&&t(Object.keys(e),function(t){u[t]=r(e[t],v)||n(t)?e[t]:{$eq:e[t]}}),u}function u(n,e){var u=r(e,s)?e.split("."):[],o=u.length?u.pop():null,i=o?void 0:e;return u.length&&t(u,function(t){return n=t in n?n[t]:!1}),n&&o in n?n[o]:i}function o(n,t,e){var o;return e&&!r(t,e)&&void 0!==(o=u(n,t))&&r(o,e)?o:t}function i(n,t){return function(r,e,i){var c=u(r,e),f=o(r,i,n||typeof c);return void 0!==c&&void 0!==f&&t(c,f)}}function c(n,t,r,e){if(n in h)return h[n](t,r,e);throw new Error('Operator "'+n+'" not implemented')}function f(n,r,e){var u=null;return t(Object.keys(r),function(t){return u=c(t,e,n,r[t])}),u}function a(r,u){var o=e(r),i=!1;return t(Object.keys(o),function(t){return i=n(t)?c(t,u,o[t]):f(t,o[t],u)}),i}var d=this,l="array",$="number",v="object",s="string",p=/^\$(?:or|and|not|nor)$/i,g=/^(.)(.+)\1([gimuy]+)?$/,h={};h={$eq:i(null,function(n,t){return n===t}),$gt:i($,function(n,t){return n>t}),$gte:i($,function(n,t){return n>=t}),$lt:i($,function(n,t){return t>n}),$lte:i($,function(n,t){return t>=n}),$ne:i(null,function(n,t){return n!==t}),$in:i(l,function(n,t){return t.indexOf(n)>=0}),$nin:i(l,function(n,t){return t.indexOf(n)<0}),$or:function(n,r){var e;return t([].concat(r),function(t){return e=a(t,n),!e}),e},$and:function(n,r){var e;return t([].concat(r),function(t){return e=a(t,n)}),e},$not:function(n,t){return!c("$and",n,t)},$nor:function(n,t){return!c("$or",n,t)},$exists:function(n,t,r){return void 0!==u(n,t)===o(n,r)},$type:function(n,t,e){return r(u(n,t),e.toLowerCase())},$mod:i(l,function(n,t){var r=[].concat(t).concat(0);return n%r[0]===r[1]}),$regex:function(n,t,r){var e=u(n,t),o=u(n,r)||r,i=(""+o).match(g),c=new RegExp(i?i[2]:r,i?i[3]:"");return c.test(e)},$all:function(n,r,e){var i,f=u(n,r).map(function(t){return u(n,t)});return t(o(n,e,l),function(t){return i=c("$in",n,t,f)}),i},$elemMatch:function(n,r,e){var o,i=u(n,r);return t(i,function(t){return o=f(t,e,n),!o}),o},$size:i(l,function(n,t){return r(n,l)&&n.length===t})},d.evaluate=function(n,t){return n&&r(t,v)?a(n,t):!1}}function r(t,r,u,o){function i(){e.evaluate(u,r)?t.parentNode||c.parentNode.insertBefore(t,c):t.parentNode&&t.parentNode.removeChild(t)}var c;o.stopDescend(),t.parentNode&&(c=t.parentNode.insertBefore(document.createTextNode(""),t),n.bind(r,t.childNodes)),r.on("update",i)()}var e=new t;r.evaluate=function(n,t){return e.evaluate(n,t)},n.extension("conditional",r)}(kontext);!function(n){"use strict";function e(n,e,s){"classList"in n?n.classList[s?"add":"remove"](e):n.className=n.className.replace(new RegExp("(?:^|\\s+)"+e+"(\\s+|$)"),function(n,e){return e||""})+(s?" "+e:"")}n.extension("css",function(n,s,t){Object.keys(t).forEach(function(c){var a=s.delegation(t[c]);a&&a.on("update",function(){e(n,c,a())})()})})}(kontext);kontext.extension("each",function(e,n,t,o){"use strict";function i(e){var t="object"==typeof e?e.target||null:String(e);if(!t)throw new Error('Missing target for "each"');return n.delegation(t)}function r(e,n){return n.parentNode.insertBefore(e,n)}function c(e){return"object"==typeof t&&["map","filter"].forEach(function(o){o in t&&[].concat(t[o]).forEach(function(t){if("function"==typeof n[t])e=e[o](n[t]);else{if("function"!=typeof window[t])throw new Error(t+" is not a "+o+" function");e=e[o](window[t])}})}),e}function f(e,n,t){n in e||("function"==typeof e.define?e.define(n,t):e[n]=t)}function u(e,t){var o,i,r,c=N.filter(function(n){return n.item===e}),u=c.length?c[0]:null;return u||(i=document.createDocumentFragment(),o=x.map(function(e){return i.appendChild(e.cloneNode(!0))}),r="object"==typeof e?e:{},f(r,"$index",0),f(r,"$item",e),f(r,"$parent",t()),f(r,"$model",n),u={item:e,model:kontext.bind(r,o,m),nodes:o},N.push(u)),u}function d(e,n){return e.length!==n.length||0!==e.filter(function(e,t){return n[t]!==e}).length}function l(n){for(n.forEach(function(n,t){e.childNodes.length>t?e.childNodes[t]!==n&&r(n,e.childNodes[t]):e.appendChild(n)});e.childNodes.length>n.length;)e.removeChild(e.childNodes[n.length])}function a(e){var n,t=v.start.nextSibling;for(e.forEach(function(e){t=t!==e?r(e,t).nextSibling:e.nextSibling});t&&t!==v.end;)n=t,t=t.nextSibling,n.parentNode.removeChild(n)}function s(e,n){var t=v?a:l;t(e.reduce(function(e,t,o){var i=u(t,n);return i.model.$index=o,e.concat(i.nodes)},[]))}function h(e){var n=c(e());b&&!d(b,n)||(b=n.slice(),s(n,e))}function p(e,n,t){var o=e.getAttribute(n),i=new RegExp("(['\"])?(?:"+t+")\\1\\s*:\\s*\\{[^\\}]+\\}"),r=o.replace(i,"").replace(/(?:,\s*)+/,",").replace(/^[,\s]+|[,\s]+$/,"");e.setAttribute(n,r)}function g(){var n,c=i(t),f=document.createTextNode("");if(m=o.settings,n=m.provider.attribute.settings,o.stopDescend(),c){if("object"==typeof t&&w in t&&t[w])v={start:r(f,e),end:r(f.cloneNode(),e)},p(e,n.attribute,o.extension),x.push(e.parentNode.removeChild(e));else for(;e.firstChild;)x.push(e.removeChild(e.firstChild));c.on("update",function(){h(c)}),h(c)}}var m,v,b,x=[],N=[],w="self";g()});kontext.extension("event",function(n,t,o){"use strict";function e(o,e,i){n.addEventListener(o,function(n){var o=t.delegation(e),c=o?o():!1;o?"function"==typeof c?c.apply(null,[n,t,e,i]):o(i):"function"==typeof window[e]&&window[e].apply(null,[n,t,e,i])},!1)}function i(n,t){"object"==typeof t?(t instanceof Array?t:Object.keys(t)).forEach(function(o){e(n,o,o in t?t[o]:void 0)}):e(n,t)}Object.keys(o).forEach(function(n){i(n,o[n])})});kontext.extension("html",function(n,t,e){"use strict";var i=t.delegation(e);i&&i.on("update",function(){n.innerHTML=i()})()});!function(n){"use strict";function e(n,e,t){function o(n,e){"function"==typeof n&&n.on("update",e)()}function u(n){return"function"==typeof n?n():n}function i(n,e){return"object"==typeof n&&n&&(e=n.label||n.value||"",n=n.value||""),new Option(e,n||"")}function c(){var e,t,o,i=u(s.value);if(!n.multiple)return s.value(n.options[n.selectedIndex].value);for(o=0;o<n.options.length;++o)e=n.options[o],t=i.indexOf(e.value),e.selected&&0>t?i.push(e.value):!e.selected&&t>=0&&i.splice(t,1)}function a(e){var t,o=[].concat(e);for(t=0;t<n.options.length;++t)n.options[t].selected=o.indexOf(n.options[t].value)>=0}function l(e){var t=u(s["default"]),o=u(s.options),c=0;o instanceof Array||(o=Object.keys(o).map(function(n){return{value:n,label:o[n]}})),t&&(n.options[c]=i(null,t),++c),n.options.length=c,o.forEach(function(e,t){n.options[c+t]=i(e)}),n.multiple=e instanceof Array,a(e)}function f(){["default","options","value"].forEach(function(n){s[n]=n in t?e.delegation(t[n])||t[n]:null}),o(s["default"],function(){l(u(s.value))}),o(s.options,function(){l(u(s.value))}),o(s.value,function(){a(u(s.value))}),n.addEventListener("change",c,!1)}var s={};f()}function t(n){return n.getAttribute("type")||(/^select/i.test(n.nodeName)?"select":"text")}n.extension("input",function(n,o,u){var i=["value"];switch(t(n)){case"select":return new e(n,o,u);case"checkbox":case"radio":i.push("checked")}i.forEach(function(e){var t=e in u?o.delegation(u[e]):null;t&&(["input","change"].forEach(function(o){n.addEventListener(o,function(){t(n[e])},!1)}),t.on("update",function(){n[e]=t()})())})})}(kontext);!function(t){"use strict";function e(){function t(t,e){var n=new XMLHttpRequest;n.addEventListener("load",function(){var t,n=this.responseText;return this.status>=400?e(n):(t=document.createElement("div"),t.innerHTML=n,void e(null,t))}),n.open("GET",t),n.send()}function e(t){return t in l||(l[t]={data:t?null:{content:document,error:null},callback:[],selector:{}}),l[t]}function n(t,e){var n,o=e?t.querySelector(e):t,r=document.createDocumentFragment();for(n=0;n<o.childNodes.length;++n)r.appendChild(o.childNodes[n].cloneNode(!0));return r}function o(t){var e;t.length&&(e=t.shift(),setTimeout(function(){e(),o(t)},0))}function r(a,c){var l=e(a.path);return l.data?(a.selector in l.selector||(l.selector[a.selector]=l.data.content?n(l.data.content,a.selector):[]),l.data.error?c(l.data.error):void c(null,l.selector[a.selector].cloneNode(!0))):(l.callback.push(function(){r(a,c)}),void(l.callback.length<=1&&t(a.path,function(t,e){l.data={error:t,content:e},o(l.callback)})))}function a(t){var e,n={path:"",selector:""};return"string"==typeof t?(e=t.match(/^([^#]+)?(#.*)?$/),n.path=e[1]||n.path,n.selector=e[2]||n.selector):t&&"object"==typeof t&&Object.keys(n).forEach(function(e){e in t&&(n[e]=t[e]||n[e])}),n}var c=this,l={};c.load=function(t,e){var n=a(t);return n.path||n.selector?void r(n,function(t,n){return t?e(t):void e(null,n)}):e("No path and selector")}}var n=new e;t.extension("template",function(e,o,r){function a(r){n.load(r,function(n,r){if(n)return e.setAttribute("data-kontext-error",n);for(;e.lastChild;)e.removeChild(e.lastChild);t.bind(o,r),e.appendChild(r),e.style.display=""})}var c;return e.style.display="none","object"==typeof r&&"value"in r?(c=o.delegation(r.value),void(c&&c.on("update",function(){a(c())})())):a(r)})}(kontext);!function(e){function t(e,t){return e&&"object"==typeof e&&t in e?e[t]:void 0}function n(e){return 3===t(e,"nodeType")}function i(e){return n(e)?e:n(e.firstChild)?e.firstChild:e.insertBefore(document.createTextNode(""),e.firstChild)}e.extension("text",function(e,n,o,r){"use strict";var d=t(o,"target")||o,f=t(o,"initial"),u=d?n.delegation(d):null;r.settings.greedy&&!u&&(u=n.define(d,f||"")),u&&(u()||void 0===f||u(f),u.element(i(e)))})}(kontext);